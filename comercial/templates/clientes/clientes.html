{% extends 'core/base.html' %} {% load static %} 
{% block title%}Clientes{%endblock title %} {% block extra_css %}
<link
  href="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.3.5/b-3.2.5/b-html5-3.2.5/r-3.0.7/sc-2.4.3/sp-2.3.5/sl-3.1.3/datatables.min.css"
  rel="stylesheet"
  integrity="sha384-/fBAaCcsGGCYew0GsdkfCJyQis5xrxvNfp5FHfeFbKdX6wLqPfht6te1hByIgvvN"
  crossorigin="anonymous"
/>
{% endblock extra_css %} {% block content %}
<h1 class="mt-4">Clientes</h1>
<ol class="breadcrumb mb-4">
  <li class="breadcrumb-item"><a href="{% url 'core:index' %}">Home</a></li>
  <li class="breadcrumb-item">Comercial</li>
  <li class="breadcrumb-item active">Clientes</li>
</ol>
<div class="card mb-4">
  <div class="card-header">
    <i class="fas fa-table me-1"></i>
    Tabela de Clientes
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table id="table" class="table datatable-table text-nowrap">
        <thead>
          <tr>
            <th>Cliente</th>
            <th>CPF/CNPJ</th>
            <th>Telefone Principal</th>
            <th>Endereço</th>
            <th>Inscrição Estadual</th>
          </tr>
        </thead>
        <tbody>
          {% for cliente in clientes %}
          <tr
            data-id="{{ cliente.id }}"
            data-nome="{{ cliente.nome }}"
            data-cpf_cnpj="{{ cliente.cpf_cnpj }}"
            data-telefone="{{ cliente.telefone }}"
            data-endereco="{{ cliente.endereco }}"
            data-inscricao_estadual="{{ cliente.inscricao_estadual }}"
            data-update-url="{% url 'comercial:editar_cliente' pk=cliente.id %}"
            data-delete-url="{% url 'comercial:deletar_cliente' pk=cliente.id %}"
            pointer=""
            data-bs-toggle="offcanvas"
            data-bs-target="#itemOffCanvas"
            aria-controls="itemOffCanvas"
          >
            <td>{{ cliente.nome }}</td>
            <td>{{ cliente.cpf_cnpj }}</td>
            <td>{{ cliente.telefone }}</td>
            <td>{{ cliente.endereco }}</td>
            <td>{{ cliente.inscricao_estadual }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
<div
  class="modal fade"
  id="deleteModal"
  tabindex="-1"
  aria-labelledby="deleteModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="deleteModalLabel">
          Confirmação de Exclusão
        </h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <p class="mb-0">Você tem certeza? Esta ação não pode ser desfeita.</p>
      </div>
      <div class="modal-footer">
        <form method="post" action="" id="deleteForm">
          {% csrf_token %}
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancelar
          </button>
          <button type="submit" class="btn btn-danger" id="confirmDelete">
            Excluir
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<div
  class="offcanvas offcanvas-end"
  tabindex="-1"
  id="itemOffCanvas"
  aria-labelledby="itemOffCanvasLabel"
>
  <div class="offcanvas-header">
    <h5 id="itemOffCanvasLabel">Detalhes do Cliente</h5>
    <button
      type="button"
      class="btn-close text-reset"
      data-bs-dismiss="offcanvas"
      aria-label="Close"
    ></button>
  </div>
  <div class="offcanvas-body">
    <form method="post" action="#" id="itemForm">
      {% csrf_token %}
      <div class="mb-3">
        <label for="nome" class="form-label">Nome do Cliente</label>
        <input
          type="text"
          class="form-control"
          id="nome"
          name="nome"
          data-bind="nome"
          required
          disabled
        />
      <div class="mb-3">
        <label for="cpf_cnpj" class="form-label">CPF/CNPJ</label>
        <input
          type="text"
          class="form-control"
          id="cpf_cnpj"
          name="cpf_cnpj"
          data-bind="cpf_cnpj"
          required
          disabled
        />
      <div class="mb-3">
        <label for="telefone" class="form-label">Telefone</label>
        <input
          type="text"
          class="form-control"
          id="telefone"
          name="telefone"
          data-bind="telefone"
          required
          disabled
        />
      </div>
      <div class="mb-3">
        <label for="endereco" class="form-label">Endereço</label>
        <input
          type="text"
          class="form-control"
          id="endereco"
          name="endereco"
          data-bind="endereco"
          required
          disabled
        />
      </div>
      <div class="mb-3">
        <label for="inscricao_estadual" class="form-label">Inscrição Estadual</label>
        <input
          type="text"
          class="form-control"
          id="inscricao_estadual"
          name="inscricao_estadual"
          data-bind="inscricao_estadual"
          required
          disabled
        />
      </div>
      <div
        class="d-flex justify-content-between"
        id="generalActions"
        role="group"
        aria-label="Ações"
      >
        <button type="button" class="btn btn-secondary" id="editButton">
          <i class="fas fa-edit"></i> Editar
        </button>
        <button
          type="button"
          class="btn btn-danger"
          data-bs-toggle="modal"
          data-bs-target="#deleteModal"
          id="deleteButton"
        >
          <i class="fas fa-trash"></i> Deletar
        </button>
      </div>
      <div
        class="d-none justify-content-between"
        id="editActions"
        role="group"
        aria-label="Ações"
      >
        <button type="submit" class="btn btn-primary" id="saveButton">
          <i class="fas fa-save"></i> Salvar
        </button>
        <button type="button" class="btn btn-secondary" id="cancelButton">
          <i class="fas fa-times"></i> Cancelar
        </button>
      </div>
    </form>
  </div>
</div>
<button
  id="createTrigger"
  class="d-none"
  data-bs-toggle="offcanvas"
  data-bs-target="#itemOffCanvas"
  data-create-url="{% url 'comercial:clientes_create' %}"
></button>
{% endblock content %} {% block extra_js %}
<script defer
  src="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.3.5/b-3.2.5/b-html5-3.2.5/r-3.0.7/sc-2.4.3/sp-2.3.5/sl-3.1.3/datatables.min.js"
  integrity="sha384-dtFR4AuNqbJGpuDh7hnaQ8bDHmyvidzFtu95cqBqQiM/1orz0TCpFduoJRK8aAwy"
  crossorigin="anonymous"
></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js" integrity="sha512-pHVGpX7F/27yZ0ISY+VVjyULApbDlD0/X0rgGbTqCE7WFW5MezNTWG/dnhtbBuICzsd0WQPgpE4REBLv+UqChw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script defer src="{% static 'js/dataTable.js' %}"></script>
<script defer src="{% static 'js/itemOffCanvas.js' %}"></script>
<script defer src="{% static 'js/cpfCnpjMask.js' %}"></script>
{% endblock extra_js %}
